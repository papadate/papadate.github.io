<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>轮播图</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/slideshow.css">
    <script>
        window.onload = function()
        {
            var qrCode = document.getElementById("qrCode");
            var img_list = document.getElementById("img_list");
            var navigator = document.getElementById("navigator");
            var last = document.getElementById("last");
            var next = document.getElementById("next");

            // initialize the location of qrCode -> left-bottom corner of the img_box
            qrCode.style.left = 4 + img_box.offsetLeft + "px";
            qrCode.style.top = -5 +img_box.offsetTop + img_box.offsetHeight - qrCode.offsetHeight + "px";

            var qrArr = ["../src/image/slide_show/QrCode/1.png", "../src/image/slide_show/QrCode/2.png", "../src/image/slide_show/QrCode/3.png", "../src/image/slide_show/QrCode/4.png", "../src/image/slide_show/QrCode/5.png", "../src/image/slide_show/QrCode/6.png", "../src/image/slide_show/QrCode/7.png"];
            qrCode.firstElementChild.firstElementChild.firstElementChild.src = qrArr[0];

            img_list.imgSize = 7;
            img_list.current = 0;

            console.log(1);
            for(var i = 0; i < img_list.imgSize; i++)
            {
                // console.log(2);
                var fun = function(arg){
                    console.log(arg);
                    navigator.children[arg].firstElementChild.onclick = function()
                    {
                        console.log(arg);
                        img_list.style.top = -((466+5)*arg) + "px";
                    }
                }(i);
            }
            navigator.children[img_list.current].firstElementChild.style.backgroundColor = "red";
            img_list.timer = setInterval(function(){
                navigator.children[img_list.current].firstElementChild.style.backgroundColor = "rgba(255, 254, 254, 0.826)";
                if (img_list.current == (img_list.imgSize-1))
                {
                    img_list.current = -1;
                }
                img_list.current++;
                navigator.children[img_list.current].firstElementChild.style.backgroundColor = "red";
                if(img_list.current == img_list.imgSize)
                {
                    img_list.current = 0;
                }
                img_list.style.top = -((466+5)*img_list.current) + "px";
                qrCode.firstElementChild.firstElementChild.firstElementChild.src = qrArr[img_list.current];
            }, 388000);

            last.onclick = function()
            {
                navigator.children[img_list.current].firstElementChild.style.backgroundColor = "rgba(255, 254, 254, 0.826)";
                if (img_list.current == 0)
                {
                    img_list.current = img_list.imgSize;
                }
                img_list.current--;
                navigator.children[img_list.current].firstElementChild.style.backgroundColor = "red";
                img_list.style.top = -((466+5)*img_list.current) + "px";
                qrCode.firstElementChild.firstElementChild.firstElementChild.src = qrArr[img_list.current];
            }
            next.onclick = function()
            {
                navigator.children[img_list.current].firstElementChild.style.backgroundColor = "rgba(255, 254, 254, 0.826)";
                if (img_list.current == (img_list.imgSize-1))
                {
                    img_list.current = -1;
                }
                img_list.current++;
                navigator.children[img_list.current].firstElementChild.style.backgroundColor = "red";
                if(img_list.current == img_list.imgSize)
                {
                    img_list.current = 0;
                }
                img_list.style.top = -((466+5)*img_list.current) + "px";
                qrCode.firstElementChild.firstElementChild.firstElementChild.src = qrArr[img_list.current];
            }
        }
    </script>
</head>
    <body>
        <!-- set a box to hold elements -->
        <!-- 1. div -> img
             2. a list of navigator
             3. last img button
             4. next img button
             5. qrcode space -->
        <div id="box">
            <!-- container for img -->
            <div id="img_box">
                <ul id="img_list">
                    <li><img src="../src/image/slide_show/1.webp" alt="1"></li>
                    <li><img src="../src/image/slide_show/2.webp" alt="2"></li>
                    <li><img src="../src/image/slide_show/3.webp" alt="3"></li>
                    <li><img src="../src/image/slide_show/4.webp" alt="4"></li>
                    <li><img src="../src/image/slide_show/5.webp" alt="5"></li>
                    <li><img src="../src/image/slide_show/6.webp" alt="6"></li>
                    <li><img src="../src/image/slide_show/7.webp" alt="7"></li>
                </ul>     
            </div>
            <!-- container for navigator -->
            <ul id="navigator">
                <li>
                    <a href="#"></a>
                </li>
                <li>
                    <a href="#"></a>
                </li>
                <li>
                    <a href="#"></a>
                </li>
                <li>
                    <a href="#"></a>
                </li>
                <li>
                    <a href="#"></a>
                </li>
                <li>
                    <a href="#"></a>
                </li>
                <li>
                    <a href="#"></a>
                </li>
            </ul>
            <!-- Qrcode div -->
            <div id="qrCode">
                <ul>
                    <li><img src="../src/image/slide_show/QrCode/1.png" alt="qrcode"></li>
                </ul>
                
            </div>
            <!-- container for last and next button -->
            <div id="controller"> 
                <!-- go back -->
                <input type="button" value="上一张" id="last">
                <!-- go forward -->
                <input type="button" value="下一张" id="next">
            </div>
        </div>
    </body>
</html>